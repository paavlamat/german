<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>German Pronunciation Trainer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
            position: relative;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        /* Back Button */
        .back-button {
            position: absolute;
            left: 0;
            top: 10px;
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.2s;
        }
        
        .back-button:hover {
            background-color: #2980b9;
        }
        
        /* Home Screen Styles */
        .home-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            text-align: center;
        }
        
        .mode-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            width: 100%;
            margin-top: 40px;
        }
        
        .mode-card {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            border-color: #3498db;
        }
        
        .mode-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #3498db;
        }
        
        .mode-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .mode-description {
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        /* Word Limit Control */
        .word-limit-control {
            margin-top: 20px;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 800px;
        }
        
        .word-limit-title {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1rem;
            text-align: center;
        }
        
        .word-limit-slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 500px;
        }
        
        .word-limit-input {
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 1rem;
            width: 80px;
            text-align: center;
        }
        
        .word-limit-input:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .word-limit-slider {
            flex-grow: 1;
            height: 6px;
            -webkit-appearance: none;
            background: #e0e0e0;
            border-radius: 3px;
            outline: none;
        }
        
        .word-limit-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2ecc71;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .word-limit-value {
            min-width: 40px;
            font-weight: 600;
            color: #2ecc71;
        }
        
        .word-limit-info {
            color: #7f8c8d;
            font-size: 0.9rem;
            text-align: center;
        }
        
        /* Tab Styles */
        .tab {
            display: none;
            flex-direction: column;
            flex-grow: 1;
        }
        
        .tab.active {
            display: flex;
        }
        
        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .volume-control label {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .volume-slider {
            width: 200px;
            height: 6px;
            -webkit-appearance: none;
            background: #e0e0e0;
            border-radius: 3px;
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .volume-value {
            min-width: 40px;
            font-weight: 600;
            color: #3498db;
        }
        
        /* Instructions */
        .instructions {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #3498db;
        }
        
        .instructions p {
            margin-bottom: 5px;
        }
        
        /* Word List Mode */
        .word-list-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .word-card {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            cursor: pointer;
            border: 1px solid #eaeaea;
            position: relative;
        }
        
        .word-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            border-color: #3498db;
        }
        
        .word-card.bookmarked {
            background-color: #fffde7;
            border-color: #f39c12;
        }
        
        .bookmark-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            color: #f39c12;
            z-index: 10;
        }
        
        .bookmark-icon:hover {
            transform: scale(1.2);
        }
        
        .word-number {
            background-color: #3498db;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .word-details {
            flex-grow: 1;
        }
        
        .main-word {
            font-weight: bold;
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 3px;
        }
        
        .secondary-word {
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 3px;
        }
        
        .third-word {
            color: #95a5a6;
            font-size: 0.9rem;
        }
        
        .speaker-icon {
            color: #3498db;
            font-size: 1.5rem;
            margin-left: 10px;
            flex-shrink: 0;
        }
        
        .playing {
            background-color: #f0f8ff;
            border-color: #3498db;
        }
        
        .playing .main-word {
            color: #3498db;
        }
        
        .playing .speaker-icon {
            animation: pulse 1s infinite;
        }
        
        /* Random Mode */
        .random-mode {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            text-align: center;
        }
        
        .random-word-container {
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }
        
        .random-main-word {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            min-height: 60px;
        }
        
        .random-translation {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed #ddd;
        }
        
        .random-translation.hidden {
            display: none;
        }
        
        .translation-text {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        
        .translation-item {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-secondary {
            background-color: #2ecc71;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #27ae60;
        }
        
        .btn-tertiary {
            background-color: #e74c3c;
            color: white;
        }
        
        .btn-tertiary:hover {
            background-color: #c0392b;
        }
        
        .btn-quaternary {
            background-color: #9b59b6;
            color: white;
        }
        
        .btn-quaternary:hover {
            background-color: #8e44ad;
        }
        
        /* Quiz Mode */
        .quiz-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            text-align: center;
        }
        
        .quiz-question-container {
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }
        
        .quiz-question {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            min-height: 60px;
        }
        
        .quiz-audio-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .quiz-instruction {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 25px;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .quiz-option {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background-color: white;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1rem;
        }
        
        .quiz-option:hover {
            background-color: #f8f9fa;
            border-color: #3498db;
        }
        
        .quiz-option.selected {
            background-color: #e8f4fc;
            border-color: #3498db;
            color: #2c3e50;
        }
        
        .quiz-option.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        
        .quiz-option.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        
        .quiz-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: none;
        }
        
        .quiz-feedback.correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .quiz-feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .quiz-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* Audio Challenge Mode */
        .audio-challenge-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            text-align: center;
        }
        
        .audio-challenge-question-container {
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }
        
        .audio-question {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 30px;
            min-height: 60px;
        }
        
        .audio-input-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .audio-input {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .audio-input:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .audio-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .audio-translation {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-top: 15px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 3px solid #3498db;
        }
        
        /* Bookmarked Words Section */
        .bookmarked-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f39c12;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title::before {
            content: "‚≠ê";
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .mode-selection {
                grid-template-columns: 1fr;
            }
            
            .word-list-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .language-options {
                flex-direction: column;
                align-items: center;
            }
            
            .word-limit-slider-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .word-limit-input {
                order: 2;
            }
        }
        
        @media (max-width: 480px) {
            .word-list-container {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
            
            .random-word-container, .quiz-question-container, .audio-challenge-question-container {
                padding: 25px;
            }
            
            .random-main-word, .quiz-question, .audio-question {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header id="main-header">
            <h1 id="page-title">German Pronunciation Trainer</h1>
            <p class="subtitle" id="page-subtitle">Learn German words with English and Danish translations</p>
            <button id="back-button" class="back-button" style="display: none;">
                ‚Üê Back to Home
            </button>
        </header>
        
        <!-- Home Screen -->
        <div id="home-screen" class="home-screen">
            <div class="word-limit-control" id="word-limit-control">
                <div class="word-limit-title">Word Limit: <span id="word-limit-display">200</span> words</div>
                <div class="word-limit-slider-container">
                    <input type="range" min="1" max="200" value="200" class="word-limit-slider" id="word-limit-slider">
                    <input type="number" min="1" max="200" value="200" class="word-limit-input" id="word-limit-input">
                </div>
                <div class="word-limit-info">
                    Adjust the slider or type a number (1-200) to limit the number of words used in all modes.
                </div>
            </div>
            
            <div class="mode-selection">
                <div class="mode-card" data-mode="list">
                    <div class="mode-icon">üìã</div>
                    <div class="mode-title">List Mode</div>
                    <div class="mode-description">Browse all German words with English and Danish translations. Click any word to hear pronunciation. Bookmark words for later review.</div>
                    <div class="btn btn-primary">Select Mode</div>
                </div>
                
                <div class="mode-card" data-mode="random">
                    <div class="mode-icon">üé≤</div>
                    <div class="mode-title">Random Mode</div>
                    <div class="mode-description">Get random German words to practice. Reveal English and Danish translations when ready. Great for vocabulary testing.</div>
                    <div class="btn btn-primary">Select Mode</div>
                </div>
                
                <div class="mode-card" data-mode="quiz">
                    <div class="mode-icon">‚ùì</div>
                    <div class="mode-title">Quiz Mode</div>
                    <div class="mode-description">Test your knowledge with multiple choice questions. Match German words to their English AND Danish translations.</div>
                    <div class="btn btn-primary">Select Mode</div>
                </div>
                
                <div class="mode-card" data-mode="audio">
                    <div class="mode-icon">üéµ</div>
                    <div class="mode-title">Audio Challenge</div>
                    <div class="mode-description">Listen to German words and type what you hear. Perfect for pronunciation and listening practice.</div>
                    <div class="btn btn-primary">Select Mode</div>
                </div>
            </div>
        </div>
        
        <!-- List Mode Tab -->
        <div id="list-mode-tab" class="tab">
            <div class="controls">
                <div class="volume-control">
                    <label for="volume-slider">Volume:</label>
                    <input type="range" min="0" max="1" step="0.1" value="0.7" class="volume-slider" id="volume-slider">
                    <span class="volume-value" id="volume-value">70%</span>
                </div>
            </div>
            
            <div class="instructions">
                <p><strong>List Mode:</strong> Click on any word card to hear it pronounced. Click the star icon (‚≠ê) to bookmark words for later review. Bookmarked words appear at the top in yellow.</p>
                <p><strong>Note:</strong> This uses the browser's speech synthesis API. Pronunciation accuracy may vary based on your browser and system.</p>
                <p><strong>Word Limit:</strong> Using <span id="list-word-limit-info">200</span> words from the list.</p>
            </div>
            
            <div class="bookmarked-section" id="bookmarked-section">
                <!-- Bookmarked words will be dynamically inserted here -->
            </div>
            
            <div class="word-list-container" id="word-list-container">
                <!-- Word cards will be dynamically inserted here -->
            </div>
        </div>
        
        <!-- Random Mode Tab -->
        <div id="random-mode-tab" class="tab">
            <div class="controls">
                <div class="volume-control">
                    <label for="random-volume-slider">Volume:</label>
                    <input type="range" min="0" max="1" step="0.1" value="0.7" class="volume-slider" id="random-volume-slider">
                    <span class="volume-value" id="random-volume-value">70%</span>
                </div>
            </div>
            
            <div class="instructions">
                <p><strong>Random Mode:</strong> A random German word will appear. Try to recall the English and Danish meanings before revealing the translations.</p>
                <p>Use the "Speak Word" button to hear pronunciation, "Next Word" for a new random word, and "Reveal Translation" to see both English and Danish translations.</p>
                <p><strong>Word Limit:</strong> Using <span id="random-word-limit-info">200</span> words from the list.</p>
            </div>
            
            <div class="random-mode">
                <div class="random-word-container">
                    <div class="random-main-word" id="random-main-word">Click "Next Word" to begin</div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" id="speak-random-word">
                            üîä Speak Word
                        </button>
                        <button class="btn btn-secondary" id="next-random-word">
                            üîÑ Next Word
                        </button>
                        <button class="btn btn-tertiary" id="reveal-translation">
                            üëÅÔ∏è Reveal Translations
                        </button>
                    </div>
                    
                    <div class="random-translation hidden" id="random-translation">
                        <div class="translation-text">Translations:</div>
                        <!-- Translations will be dynamically inserted here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quiz Mode Tab -->
        <div id="quiz-mode-tab" class="tab">
            <div class="quiz-container">
                <div class="quiz-question-container">
                    <div class="quiz-stats">
                        <div id="quiz-score">Score: 0/0</div>
                        <div id="quiz-question-count">Question: 1/10</div>
                    </div>
                    
                    <div class="quiz-instruction" id="quiz-instruction">
                        What are the correct English AND Danish translations for this German word?
                    </div>
                    
                    <div class="quiz-question" id="quiz-question">
                        Loading question...
                    </div>
                    
                    <div class="quiz-audio-controls">
                        <button class="btn btn-primary" id="play-quiz-word">
                            üîä Play Word
                        </button>
                        <button class="btn btn-secondary" id="play-quiz-again" style="display: none;">
                            üîÑ Play Again
                        </button>
                    </div>
                    
                    <div class="quiz-options" id="quiz-options">
                        <!-- Options will be dynamically inserted here -->
                    </div>
                    
                    <div class="quiz-feedback" id="quiz-feedback">
                        <!-- Feedback will be shown here -->
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" id="next-quiz-question">
                            Next Question ‚Üí
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Audio Challenge Mode Tab -->
        <div id="audio-mode-tab" class="tab">
            <div class="audio-challenge-container">
                <div class="audio-challenge-question-container">
                    <div class="quiz-stats">
                        <div id="audio-score">Score: 0/0</div>
                        <div id="audio-question-count">Word: 1/10</div>
                    </div>
                    
                    <div class="audio-question" id="audio-question">
                        Listen to the German word and type what you hear
                    </div>
                    
                    <div class="audio-controls">
                        <button class="btn btn-primary" id="play-audio-word">
                            üîä Play Word
                        </button>
                        <button class="btn btn-secondary" id="play-audio-again" style="display: none;">
                            üîÑ Play Again
                        </button>
                    </div>
                    
                    <div class="audio-input-container">
                        <input type="text" class="audio-input" id="audio-input" placeholder="Type the German word here...">
                        <button class="btn btn-primary" id="submit-audio-answer">
                            Submit Answer
                        </button>
                    </div>
                    
                    <div class="audio-translation" id="audio-translation" style="display: none;">
                        <!-- Translations will be shown here after guess -->
                    </div>
                    
                    <div class="quiz-feedback" id="audio-feedback">
                        <!-- Feedback will be shown here -->
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" id="next-audio-question" style="display: none;">
                            Next Word ‚Üí
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>German Pronunciation Trainer - English & Danish Translations</p>
        </footer>
    </div>

    <script>
        // Word data from the provided file
        const wordData = [
            {number: 1, german: "wie", danish: "som", english: "as"},
            {number: 2, german: "ich", danish: "jeg", english: "I"},
            {number: 3, german: "seine", danish: "hans", english: "his"},
            {number: 4, german: "dass", danish: "det", english: "that"},
            {number: 5, german: "er", danish: "han", english: "he"},
            {number: 6, german: "war", danish: "var", english: "was"},
            {number: 7, german: "f√ºr", danish: "for", english: "for"},
            {number: 8, german: "auf", danish: "p√•", english: "on"},
            {number: 9, german: "sind", danish: "er", english: "are"},
            {number: 10, german: "mit", danish: "med", english: "with"},
            {number: 11, german: "sie", danish: "de", english: "they"},
            {number: 12, german: "sein", danish: "v√¶re", english: "be"},
            {number: 13, german: "bei", danish: "hos", english: "at"},
            {number: 14, german: "ein", danish: "√©n", english: "one"},
            {number: 15, german: "haben", danish: "have", english: "have"},
            {number: 16, german: "dies", danish: "denne", english: "this"},
            {number: 17, german: "aus", danish: "fra", english: "from"},
            {number: 18, german: "durch", danish: "igennem", english: "by"},
            {number: 19, german: "hei√ü", danish: "varm", english: "hot"},
            {number: 20, german: "Wort", danish: "ord", english: "word"},
            {number: 21, german: "aber", danish: "men", english: "but"},
            {number: 22, german: "was", danish: "hvad", english: "what"},
            {number: 23, german: "einige", danish: "nogle", english: "some"},
            {number: 24, german: "ist", danish: "er", english: "is"},
            {number: 25, german: "es", danish: "det", english: "it"},
            {number: 26, german: "Sie", danish: "De", english: "you"},
            {number: 27, german: "oder", danish: "eller", english: "or"},
            {number: 28, german: "hatte", danish: "havde", english: "had"},
            {number: 29, german: "die", danish: "-en -et -ne", english: "the"},
            {number: 30, german: "von", danish: "af", english: "of"},
            {number: 31, german: "zu", danish: "til", english: "to"},
            {number: 32, german: "und", danish: "og", english: "and"},
            {number: 33, german: "ein", danish: "en/et", english: "a"},
            {number: 34, german: "bei", danish: "ved", english: "in"},
            {number: 35, german: "wir", danish: "vi", english: "we"},
            {number: 36, german: "k√∂nnen", danish: "kan", english: "can"},
            {number: 37, german: "aus", danish: "ud af", english: "out"},
            {number: 38, german: "andre", danish: "andre", english: "other"},
            {number: 39, german: "waren", danish: "hvor", english: "were"},
            {number: 40, german: "die", danish: "som", english: "which"},
            {number: 41, german: "tun", danish: "g√∏re", english: "do"},
            {number: 42, german: "ihre", danish: "deres", english: "their"},
            {number: 43, german: "Zeit", danish: "tid", english: "time"},
            {number: 44, german: "wenn", danish: "hvis", english: "if"},
            {number: 45, german: "werden", danish: "vil", english: "will"},
            {number: 46, german: "wie", danish: "hvordan", english: "how"},
            {number: 47, german: "sagte", danish: "sagde", english: "said"},
            {number: 48, german: "ein", danish: "en/et", english: "an"},
            {number: 49, german: "jeder", danish: "hver", english: "each"},
            {number: 50, german: "sagen", danish: "sige", english: "say"},
            {number: 51, german: "tut", danish: "g√∏r", english: "does"},
            {number: 52, german: "Satz", danish: "s√¶t", english: "set"},
            {number: 53, german: "drei", danish: "tre", english: "three"},
            {number: 54, german: "wollen", danish: "vil", english: "want"},
            {number: 55, german: "Luft", danish: "luft", english: "air"},
            {number: 56, german: "gut", danish: "godt", english: "well"},
            {number: 57, german: "auch", danish: "ogs√•", english: "also"},
            {number: 58, german: "spielen", danish: "spille", english: "play"},
            {number: 59, german: "klein", danish: "lille", english: "small"},
            {number: 60, german: "Ende", danish: "ende", english: "end"},
            {number: 61, german: "setzen", danish: "s√¶tte", english: "put"},
            {number: 62, german: "heim", danish: "hjem", english: "home"},
            {number: 63, german: "lesen", danish: "l√¶se", english: "read"},
            {number: 64, german: "seits", danish: "side", english: "side"},
            {number: 65, german: "Hafen", danish: "havn", english: "port"},
            {number: 66, german: "gro√ü", danish: "stor", english: "large"},
            {number: 67, german: "buchstabieren", danish: "stave", english: "spell"},
            {number: 68, german: "hinzuf√ºgen", danish: "tilf√∏je", english: "add"},
            {number: 69, german: "auch", danish: "ogs√•", english: "even"},
            {number: 70, german: "Land", danish: "land", english: "land"},
            {number: 71, german: "hier", danish: "her", english: "here"},
            {number: 72, german: "muss", danish: "skal", english: "must"},
            {number: 73, german: "gro√ü", danish: "stor", english: "big"},
            {number: 74, german: "hoch", danish: "h√∏j", english: "high"},
            {number: 75, german: "so", danish: "s√•dan", english: "such"},
            {number: 76, german: "folgen", danish: "f√∏lge", english: "follow"},
            {number: 77, german: "Akt", danish: "akt", english: "act"},
            {number: 78, german: "warum", danish: "hvorfor", english: "why"},
            {number: 79, german: "fragen", danish: "sp√∏rge", english: "ask"},
            {number: 80, german: "M√§nner", danish: "m√¶nd", english: "men"},
            {number: 81, german: "Ver√§nderung", danish: "forandring", english: "change"},
            {number: 82, german: "ging", danish: "gik", english: "went"},
            {number: 83, german: "Licht", danish: "lys", english: "light"},
            {number: 84, german: "Art", danish: "slags", english: "kind"},
            {number: 85, german: "aus", danish: "af", english: "off"},
            {number: 86, german: "m√ºssen", danish: "beh√∏ver", english: "need"},
            {number: 87, german: "Haus", danish: "hus", english: "house"},
            {number: 88, german: "Bild", danish: "billede", english: "picture"},
            {number: 89, german: "versuchen", danish: "pr√∏ve", english: "try"},
            {number: 90, german: "uns", danish: "os", english: "us"},
            {number: 91, german: "wieder", danish: "igen", english: "again"},
            {number: 92, german: "Tier", danish: "dyr", english: "animal"},
            {number: 93, german: "Punkt", danish: "punkt", english: "point"},
            {number: 94, german: "Mutter", danish: "mor", english: "mother"},
            {number: 95, german: "Welt", danish: "verden", english: "world"},
            {number: 96, german: "in der N√§he von", danish: "n√¶r", english: "near"},
            {number: 97, german: "bauen", danish: "bygge", english: "build"},
            {number: 98, german: "selbst", danish: "selv", english: "self"},
            {number: 99, german: "Erde", danish: "jord", english: "earth"},
            {number: 100, german: "Vater", danish: "far", english: "father"},
            {number: 101, german: "jeder", danish: "enhver", english: "any"},
            {number: 102, german: "neu", danish: "ny", english: "new"},
            {number: 103, german: "Arbeit", danish: "arbejde", english: "work"},
            {number: 104, german: "Teil", danish: "del", english: "part"},
            {number: 105, german: "nehmen", danish: "tage", english: "take"},
            {number: 106, german: "erhalten", danish: "f√•", english: "get"},
            {number: 107, german: "Ort", danish: "sted", english: "place"},
            {number: 108, german: "gemacht", danish: "lavet", english: "made"},
            {number: 109, german: "leben", danish: "leve", english: "live"},
            {number: 110, german: "wo", danish: "hvor", english: "where"},
            {number: 111, german: "nach", danish: "efter", english: "after"},
            {number: 112, german: "zur√ºck", danish: "tilbage", english: "back"},
            {number: 113, german: "wenig", danish: "lidt", english: "little"},
            {number: 114, german: "nur", danish: "kun", english: "only"},
            {number: 115, german: "Runde", danish: "runde", english: "round"},
            {number: 116, german: "Mann", danish: "mand", english: "man"},
            {number: 117, german: "Jahr", danish: "√•r", english: "year"},
            {number: 118, german: "kam", danish: "kom", english: "came"},
            {number: 119, german: "zeigen", danish: "vise", english: "show"},
            {number: 120, german: "jeder", danish: "hver", english: "every"},
            {number: 121, german: "gut", danish: "god", english: "good"},
            {number: 122, german: "mir", danish: "mig", english: "me"},
            {number: 123, german: "geben", danish: "give", english: "give"},
            {number: 124, german: "unsere", danish: "vores", english: "our"},
            {number: 125, german: "unter", danish: "under", english: "under"},
            {number: 126, german: "Name", danish: "navn", english: "name"},
            {number: 127, german: "sehr", danish: "meget", english: "very"},
            {number: 128, german: "durch", danish: "gennem", english: "through"},
            {number: 129, german: "nur", danish: "lige", english: "just"},
            {number: 130, german: "Formular", danish: "formular", english: "form"},
            {number: 131, german: "Satz", danish: "s√¶tning", english: "sentence"},
            {number: 132, german: "gro√ü", danish: "stor", english: "great"},
            {number: 133, german: "denken", danish: "t√¶nke", english: "think"},
            {number: 134, german: "sagen", danish: "sige", english: "say"},
            {number: 135, german: "Hilfe", danish: "hj√¶lp", english: "help"},
            {number: 136, german: "niedrig", danish: "lav", english: "low"},
            {number: 137, german: "Linie", danish: "linje", english: "line"},
            {number: 138, german: "abweichen", danish: "afvige", english: "differ"},
            {number: 139, german: "wiederum", danish: "tur", english: "turn"},
            {number: 140, german: "Ursache", danish: "√•rsag", english: "cause"},
            {number: 141, german: "viel", danish: "meget", english: "much"},
            {number: 142, german: "bedeuten", danish: "betyde", english: "mean"},
            {number: 143, german: "vor", danish: "f√∏r", english: "before"},
            {number: 144, german: "Umzug", danish: "flytning", english: "move"},
            {number: 145, german: "Recht", danish: "h√∏jre", english: "right"},
            {number: 146, german: "Junge", danish: "dreng", english: "boy"},
            {number: 147, german: "alt", danish: "gammel", english: "old"},
            {number: 148, german: "zu", danish: "ogs√•", english: "too"},
            {number: 149, german: "gleich", danish: "samme", english: "same"},
            {number: 150, german: "sie", danish: "hun", english: "she"},
            {number: 151, german: "alle", danish: "alle", english: "all"},
            {number: 152, german: "da", danish: "der", english: "there"},
            {number: 153, german: "wenn", danish: "n√•r", english: "when"},
            {number: 154, german: "hoch", danish: "op", english: "up"},
            {number: 155, german: "Verwendung", danish: "brug", english: "use"},
            {number: 156, german: "Ihre", danish: "jeres", english: "your"},
            {number: 157, german: "Weg", danish: "vej", english: "way"},
            {number: 158, german: "√ºber", danish: "om", english: "about"},
            {number: 159, german: "viele", danish: "mange", english: "many"},
            {number: 160, german: "dann", danish: "s√•", english: "then"},
            {number: 161, german: "sie", danish: "dem", english: "them"},
            {number: 162, german: "schreiben", danish: "skrive", english: "write"},
            {number: 163, german: "w√ºrde", danish: "ville", english: "would"},
            {number: 164, german: "wie", danish: "lignende", english: "like"},
            {number: 165, german: "so", danish: "s√•", english: "so"},
            {number: 166, german: "diese", danish: "disse", english: "these"},
            {number: 167, german: "sie", danish: "hende", english: "her"},
            {number: 168, german: "lange", danish: "lang", english: "long"},
            {number: 169, german: "machen", danish: "lave", english: "make"},
            {number: 170, german: "Sache", danish: "ting", english: "thing"},
            {number: 171, german: "sehen", danish: "se", english: "see"},
            {number: 172, german: "ihm", danish: "ham", english: "him"},
            {number: 173, german: "zwei", danish: "to", english: "two"},
            {number: 174, german: "hat", danish: "har", english: "has"},
            {number: 175, german: "suchen", danish: "se", english: "look"},
            {number: 176, german: "mehr", danish: "mere", english: "more"},
            {number: 177, german: "Tag", danish: "dag", english: "day"},
            {number: 178, german: "k√∂nnte", danish: "kunne", english: "could"},
            {number: 179, german: "gehen", danish: "g√•", english: "go"},
            {number: 180, german: "kommen", danish: "komme", english: "come"},
            {number: 181, german: "tat", danish: "gjorde", english: "did"},
            {number: 182, german: "Anzahl", danish: "antal", english: "number"},
            {number: 183, german: "klingen", danish: "lyde", english: "sound"},
            {number: 184, german: "nicht", danish: "ikke", english: "no"},
            {number: 185, german: "am meisten", danish: "mest", english: "most"},
            {number: 186, german: "Menschen", danish: "mennesker", english: "people"},
            {number: 187, german: "meine", danish: "min", english: "my"},
            {number: 188, german: "√ºber", danish: "over", english: "over"},
            {number: 189, german: "wissen", danish: "vide", english: "know"},
            {number: 190, german: "Wasser", danish: "vand", english: "water"},
            {number: 191, german: "als", danish: "end", english: "than"},
            {number: 192, german: "Anruf", danish: "opkald", english: "call"},
            {number: 193, german: "erste", danish: "f√∏rste", english: "first"},
            {number: 194, german: "die", danish: "der", english: "who"},
            {number: 195, german: "k√∂nnen", danish: "m√•", english: "may"},
            {number: 196, german: "nach unten", danish: "ned", english: "down"},
            {number: 197, german: "Seite", danish: "side", english: "side"},
            {number: 198, german: "gewesen", danish: "v√¶ret", english: "been"},
            {number: 199, german: "jetzt", danish: "nu", english: "now"},
            {number: 200, german: "finden", danish: "finde", english: "find"}
        ];

        // DOM elements
        const homeScreen = document.getElementById('home-screen');
        const listModeTab = document.getElementById('list-mode-tab');
        const randomModeTab = document.getElementById('random-mode-tab');
        const quizModeTab = document.getElementById('quiz-mode-tab');
        const audioModeTab = document.getElementById('audio-mode-tab');
        const backButton = document.getElementById('back-button');
        const pageTitle = document.getElementById('page-title');
        const pageSubtitle = document.getElementById('page-subtitle');
        const modeCards = document.querySelectorAll('.mode-card');
        
        // Word limit elements
        const wordLimitSlider = document.getElementById('word-limit-slider');
        const wordLimitInput = document.getElementById('word-limit-input');
        const wordLimitDisplay = document.getElementById('word-limit-display');
        const listWordLimitInfo = document.getElementById('list-word-limit-info');
        const randomWordLimitInfo = document.getElementById('random-word-limit-info');
        
        // List mode elements
        const wordListContainer = document.getElementById('word-list-container');
        const bookmarkedSection = document.getElementById('bookmarked-section');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeValue = document.getElementById('volume-value');
        
        // Random mode elements
        const randomMainWord = document.getElementById('random-main-word');
        const randomTranslation = document.getElementById('random-translation');
        const speakRandomWordBtn = document.getElementById('speak-random-word');
        const nextRandomWordBtn = document.getElementById('next-random-word');
        const revealTranslationBtn = document.getElementById('reveal-translation');
        const randomVolumeSlider = document.getElementById('random-volume-slider');
        const randomVolumeValue = document.getElementById('random-volume-value');
        
        // Quiz mode elements
        const quizQuestion = document.getElementById('quiz-question');
        const quizOptions = document.getElementById('quiz-options');
        const quizFeedback = document.getElementById('quiz-feedback');
        const nextQuizQuestionBtn = document.getElementById('next-quiz-question');
        const quizScore = document.getElementById('quiz-score');
        const quizQuestionCount = document.getElementById('quiz-question-count');
        const playQuizWordBtn = document.getElementById('play-quiz-word');
        const playQuizAgainBtn = document.getElementById('play-quiz-again');
        
        // Audio challenge elements
        const audioQuestion = document.getElementById('audio-question');
        const playAudioWordBtn = document.getElementById('play-audio-word');
        const playAudioAgainBtn = document.getElementById('play-audio-again');
        const audioInput = document.getElementById('audio-input');
        const submitAudioAnswerBtn = document.getElementById('submit-audio-answer');
        const audioTranslation = document.getElementById('audio-translation');
        const audioFeedback = document.getElementById('audio-feedback');
        const nextAudioQuestionBtn = document.getElementById('next-audio-question');
        const audioScore = document.getElementById('audio-score');
        const audioQuestionCount = document.getElementById('audio-question-count');

        // State variables
        let currentMode = 'home';
        let volume = 0.7;
        let randomVolume = 0.7;
        let currentlyPlaying = null;
        let currentRandomWord = null;
        
        // Language selection state
        const mainLanguage = 'german';
        
        // Word limit state
        let wordLimit = localStorage.getItem('wordLimit') || 200;
        
        // Bookmark state
        let bookmarkedWords = JSON.parse(localStorage.getItem('bookmarkedWords')) || [];
        
        // Quiz state - SIMPLIFIED
        let quizState = {
            currentQuestionIndex: 0,
            score: 0,
            totalQuestions: 10,
            currentQuestion: null,
            isAnswered: false,
            selectedOptionIndex: null,
            shouldAutoPlay: false
        };
        
        // Audio challenge state
        let audioState = {
            currentWord: null,
            currentQuestionIndex: 0,
            score: 0,
            totalQuestions: 10,
            words: [],
            isAnswered: false,
            shouldAutoPlay: false
        };

        // Language codes for speech synthesis
        const languageCodes = {
            german: 'de-DE'
        };

        // Initialize audio context
        let audioContext = null;
        let isAudioContextInitialized = false;

        // Initialize
        function init() {
            // Initialize word limit controls
            updateWordLimitControls();
            
            renderWordCards();
            setupEventListeners();
            updateVolumeDisplay();
            updateRandomVolumeDisplay();
            selectRandomWord();
            initializeQuiz();
            initializeAudioChallenge();
        }

        // Update word limit controls
        function updateWordLimitControls() {
            wordLimitSlider.value = wordLimit;
            wordLimitInput.value = wordLimit;
            wordLimitDisplay.textContent = wordLimit;
            listWordLimitInfo.textContent = wordLimit;
            randomWordLimitInfo.textContent = wordLimit;
        }

        // Get limited word data based on current word limit
        function getLimitedWordData() {
            return wordData.slice(0, wordLimit);
        }

        // Render all word cards for list mode with bookmarks
        function renderWordCards() {
            wordListContainer.innerHTML = '';
            bookmarkedSection.innerHTML = '';
            
            const limitedWordData = getLimitedWordData();
            
            // Create bookmarked section header if there are bookmarks
            if (bookmarkedWords.length > 0) {
                const bookmarkedHeader = document.createElement('div');
                bookmarkedHeader.className = 'section-title';
                bookmarkedHeader.textContent = `Bookmarked Words (${bookmarkedWords.length})`;
                bookmarkedSection.appendChild(bookmarkedHeader);
                
                // Create bookmarked words container
                const bookmarkedContainer = document.createElement('div');
                bookmarkedContainer.className = 'word-list-container';
                bookmarkedSection.appendChild(bookmarkedContainer);
                
                // First, render bookmarked words (only if they're within the limit)
                bookmarkedWords.forEach(bookmarkNumber => {
                    if (bookmarkNumber <= wordLimit) {
                        const word = limitedWordData.find(w => w.number === bookmarkNumber);
                        if (word) {
                            const wordCard = createWordCard(word, true, true);
                            bookmarkedContainer.appendChild(wordCard);
                        }
                    }
                });
            }
            
            // Then render all words within limit
            limitedWordData.forEach(word => {
                const isBookmarked = bookmarkedWords.includes(word.number);
                const wordCard = createWordCard(word, isBookmarked, false);
                wordListContainer.appendChild(wordCard);
            });
            
            // Update word limit info
            listWordLimitInfo.textContent = wordLimit;
        }

        // Create a word card element
        function createWordCard(word, isBookmarked, isInBookmarkSection) {
            const mainWord = word.german;
            const secondaryWord = `English: ${word.english}`;
            const thirdWord = `Danish: ${word.danish}`;
            
            const wordCard = document.createElement('div');
            wordCard.className = `word-card fade-in ${isBookmarked ? 'bookmarked' : ''}`;
            wordCard.dataset.number = word.number;
            wordCard.dataset.word = mainWord;
            
            wordCard.innerHTML = `
                <div class="word-number">${word.number}</div>
                <div class="word-details">
                    <div class="main-word">${mainWord}</div>
                    <div class="secondary-word">${secondaryWord}</div>
                    <div class="third-word">${thirdWord}</div>
                </div>
                <div class="speaker-icon">üîä</div>
                <div class="bookmark-icon" data-number="${word.number}">
                    ${isBookmarked ? '‚≠ê' : '‚òÜ'}
                </div>
            `;
            
            // Add click event for pronunciation
            wordCard.addEventListener('click', (e) => {
                if (!e.target.classList.contains('bookmark-icon')) {
                    speakWord(mainWord, wordCard, volume);
                }
            });
            
            // Add click event for bookmark icon
            const bookmarkIcon = wordCard.querySelector('.bookmark-icon');
            bookmarkIcon.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleBookmark(word.number);
            });
            
            return wordCard;
        }

        // Toggle bookmark for a word
        function toggleBookmark(wordNumber) {
            const index = bookmarkedWords.indexOf(wordNumber);
            
            if (index === -1) {
                bookmarkedWords.push(wordNumber);
            } else {
                bookmarkedWords.splice(index, 1);
            }
            
            localStorage.setItem('bookmarkedWords', JSON.stringify(bookmarkedWords));
            renderWordCards();
        }

        // Initialize audio context for sound effects
        function initAudioContext() {
            if (!isAudioContextInitialized) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    isAudioContextInitialized = true;
                } catch (e) {
                    console.error('Web Audio API is not supported in this browser');
                }
            }
        }

        // Play ding sound for correct answers
        function playDingSound() {
            initAudioContext();
            
            if (!audioContext || audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
            oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // Set up event listeners
        function setupEventListeners() {
            // Mode selection
            modeCards.forEach(card => {
                card.addEventListener('click', () => {
                    const mode = card.dataset.mode;
                    switchToMode(mode);
                });
            });
            
            // Word limit slider
            wordLimitSlider.addEventListener('input', () => {
                wordLimit = parseInt(wordLimitSlider.value);
                wordLimitInput.value = wordLimit;
                updateWordLimitControls();
                localStorage.setItem('wordLimit', wordLimit);
                
                // Refresh current mode if active
                if (currentMode === 'list') {
                    renderWordCards();
                } else if (currentMode === 'random') {
                    selectRandomWord();
                } else if (currentMode === 'quiz') {
                    initializeQuiz();
                } else if (currentMode === 'audio') {
                    initializeAudioChallenge();
                }
            });
            
            // Word limit input
            wordLimitInput.addEventListener('input', () => {
                let value = parseInt(wordLimitInput.value);
                
                if (isNaN(value) || value < 1) value = 1;
                if (value > 200) value = 200;
                
                wordLimit = value;
                wordLimitSlider.value = value;
                updateWordLimitControls();
                localStorage.setItem('wordLimit', wordLimit);
                
                // Refresh current mode if active
                if (currentMode === 'list') {
                    renderWordCards();
                } else if (currentMode === 'random') {
                    selectRandomWord();
                } else if (currentMode === 'quiz') {
                    initializeQuiz();
                } else if (currentMode === 'audio') {
                    initializeAudioChallenge();
                }
            });
            
            // Back button
            backButton.addEventListener('click', goBackToHome);
            
            // List mode volume slider
            volumeSlider.addEventListener('input', () => {
                volume = parseFloat(volumeSlider.value);
                updateVolumeDisplay();
            });
            
            // Random mode volume slider
            randomVolumeSlider.addEventListener('input', () => {
                randomVolume = parseFloat(randomVolumeSlider.value);
                updateRandomVolumeDisplay();
            });
            
            // Random mode buttons
            speakRandomWordBtn.addEventListener('click', () => {
                if (currentRandomWord) {
                    speakWord(currentRandomWord.german, null, randomVolume);
                }
            });
            
            nextRandomWordBtn.addEventListener('click', selectRandomWord);
            
            revealTranslationBtn.addEventListener('click', () => {
                if (currentRandomWord) {
                    revealTranslation();
                }
            });
            
            // Quiz mode buttons
            nextQuizQuestionBtn.addEventListener('click', handleNextQuizQuestion);
            playQuizWordBtn.addEventListener('click', () => playQuizWord());
            playQuizAgainBtn.addEventListener('click', () => playQuizWord());
            
            // Audio challenge buttons
            playAudioWordBtn.addEventListener('click', playAudioWord);
            playAudioAgainBtn.addEventListener('click', playAudioWord);
            submitAudioAnswerBtn.addEventListener('click', checkAudioAnswer);
            nextAudioQuestionBtn.addEventListener('click', nextAudioQuestion);
            audioInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAudioAnswer();
                }
            });
        }

        // Switch to a specific mode
        function switchToMode(mode) {
            currentMode = mode;
            
            homeScreen.style.display = 'none';
            backButton.style.display = 'flex';
            
            listModeTab.classList.remove('active');
            randomModeTab.classList.remove('active');
            quizModeTab.classList.remove('active');
            audioModeTab.classList.remove('active');
            
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }
            
            switch(mode) {
                case 'list':
                    pageTitle.textContent = 'List Mode';
                    pageSubtitle.textContent = 'Click any German word to hear pronunciation';
                    listModeTab.classList.add('active');
                    renderWordCards();
                    break;
                case 'random':
                    pageTitle.textContent = 'Random Mode';
                    pageSubtitle.textContent = 'Test your German vocabulary with random words';
                    randomModeTab.classList.add('active');
                    randomWordLimitInfo.textContent = wordLimit;
                    break;
                case 'quiz':
                    pageTitle.textContent = 'Quiz Mode';
                    pageSubtitle.textContent = 'Test your knowledge with German to English & Danish translations';
                    quizModeTab.classList.add('active');
                    
                    quizState.shouldAutoPlay = true;
                    initializeQuiz();
                    
                    setTimeout(() => {
                        if (quizState.shouldAutoPlay && quizState.currentQuestionIndex === 0) {
                            playQuizWord();
                        }
                    }, 800);
                    break;
                case 'audio':
                    pageTitle.textContent = 'Audio Challenge';
                    pageSubtitle.textContent = 'Listen and type the German words you hear';
                    audioModeTab.classList.add('active');
                    
                    audioState.shouldAutoPlay = true;
                    initializeAudioChallenge();
                    
                    setTimeout(() => {
                        if (audioState.shouldAutoPlay && audioState.currentQuestionIndex === 0) {
                            playAudioWord();
                        }
                    }, 800);
                    break;
            }
        }

        // Go back to home screen
        function goBackToHome() {
            currentMode = 'home';
            
            homeScreen.style.display = 'flex';
            backButton.style.display = 'none';
            
            listModeTab.classList.remove('active');
            randomModeTab.classList.remove('active');
            quizModeTab.classList.remove('active');
            audioModeTab.classList.remove('active');
            
            pageTitle.textContent = 'German Pronunciation Trainer';
            pageSubtitle.textContent = 'Learn German words with English and Danish translations';
            
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }
            
            quizState.shouldAutoPlay = false;
            audioState.shouldAutoPlay = false;
            
            initializeQuiz();
            initializeAudioChallenge();
        }

        // Update volume display for list mode
        function updateVolumeDisplay() {
            const percentage = Math.round(volume * 100);
            volumeValue.textContent = `${percentage}%`;
        }

        // Update volume display for random mode
        function updateRandomVolumeDisplay() {
            const percentage = Math.round(randomVolume * 100);
            randomVolumeValue.textContent = `${percentage}%`;
        }

        // Select a random word for random mode
        function selectRandomWord() {
            randomTranslation.classList.add('hidden');
            randomTranslation.innerHTML = '<div class="translation-text">Translations:</div>';
            
            const limitedWordData = getLimitedWordData();
            const randomIndex = Math.floor(Math.random() * limitedWordData.length);
            currentRandomWord = limitedWordData[randomIndex];
            
            randomMainWord.textContent = currentRandomWord.german;
            randomMainWord.classList.add('fade-in');
            
            setTimeout(() => {
                randomMainWord.classList.remove('fade-in');
            }, 500);
        }

        // Reveal translation in random mode
        function revealTranslation() {
            if (currentRandomWord) {
                randomTranslation.innerHTML = '<div class="translation-text">Translations:</div>';
                
                const englishItem = document.createElement('div');
                englishItem.className = 'translation-item';
                englishItem.textContent = `English: ${currentRandomWord.english}`;
                randomTranslation.appendChild(englishItem);
                
                const danishItem = document.createElement('div');
                danishItem.className = 'translation-item';
                danishItem.textContent = `Danish: ${currentRandomWord.danish}`;
                randomTranslation.appendChild(danishItem);
                
                randomTranslation.classList.remove('hidden');
                randomTranslation.classList.add('fade-in');
                
                setTimeout(() => {
                    randomTranslation.classList.remove('fade-in');
                }, 500);
            }
        }

        // Speak a word
        function speakWord(word, wordCard, volumeLevel) {
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }
            
            if (wordCard) {
                document.querySelectorAll('.word-card').forEach(card => {
                    card.classList.remove('playing');
                });
                
                wordCard.classList.add('playing');
                currentlyPlaying = wordCard;
            }
            
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = languageCodes.german;
            utterance.volume = volumeLevel;
            utterance.rate = 0.8;
            utterance.pitch = 1;
            
            utterance.onend = () => {
                if (wordCard) {
                    wordCard.classList.remove('playing');
                    currentlyPlaying = null;
                }
            };
            
            utterance.onerror = () => {
                if (wordCard) {
                    wordCard.classList.remove('playing');
                    currentlyPlaying = null;
                }
            };
            
            window.speechSynthesis.speak(utterance);
        }

        // QUIZ MODE FUNCTIONS - COMPLETELY SIMPLIFIED
        function initializeQuiz() {
            quizState = {
                currentQuestionIndex: 0,
                score: 0,
                totalQuestions: 10,
                currentQuestion: null,
                isAnswered: false,
                selectedOptionIndex: null,
                shouldAutoPlay: false
            };
            
            updateQuizDisplay();
            nextQuizQuestionBtn.style.display = 'block';
            quizFeedback.style.display = 'none';
            playQuizWordBtn.style.display = 'block';
            playQuizAgainBtn.style.display = 'none';
            nextQuizQuestionBtn.textContent = 'Next Question ‚Üí';
        }

        function updateQuizDisplay() {
            if (quizState.currentQuestionIndex >= quizState.totalQuestions) {
                // Quiz completed
                quizQuestion.textContent = 'Quiz Completed!';
                quizOptions.innerHTML = '';
                quizFeedback.textContent = `Final Score: ${quizState.score}/${quizState.totalQuestions}`;
                quizFeedback.className = 'quiz-feedback';
                quizFeedback.style.display = 'block';
                nextQuizQuestionBtn.style.display = 'none';
                playQuizWordBtn.style.display = 'none';
                playQuizAgainBtn.style.display = 'none';
                return;
            }
            
            // Generate a new question
            generateQuizQuestion();
            
            // Update question display
            quizQuestion.textContent = quizState.currentQuestion.germanWord;
            
            // Update audio controls
            playQuizWordBtn.style.display = 'block';
            playQuizAgainBtn.style.display = 'none';
            
            // Update options
            quizOptions.innerHTML = '';
            quizState.currentQuestion.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.innerHTML = `<strong>${String.fromCharCode(65 + index)}.</strong> <span style="color: #7f8c8d">English:</span> ${option.english}, <span style="color: #7f8c8d">Danish:</span> ${option.danish}`;
                optionElement.dataset.index = index;
                
                optionElement.addEventListener('click', () => selectQuizOption(index));
                quizOptions.appendChild(optionElement);
            });
            
            // Update stats
            quizScore.textContent = `Score: ${quizState.score}/${quizState.currentQuestionIndex}`;
            quizQuestionCount.textContent = `Question: ${quizState.currentQuestionIndex + 1}/${quizState.totalQuestions}`;
            
            // Reset UI state
            quizFeedback.style.display = 'none';
            quizFeedback.className = 'quiz-feedback';
            quizState.isAnswered = false;
            quizState.selectedOptionIndex = null;
            
            // Enable all options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.style.pointerEvents = 'auto';
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            nextQuizQuestionBtn.textContent = 'Next Question ‚Üí';
        }

        function generateQuizQuestion() {
            const limitedWordData = getLimitedWordData();
            
            // Pick a random German word
            const germanWordIndex = Math.floor(Math.random() * limitedWordData.length);
            const germanWord = limitedWordData[germanWordIndex];
            
            // Create options - one correct and three incorrect
            const options = [];
            
            // Add correct option
            options.push({
                english: germanWord.english,
                danish: germanWord.danish,
                isCorrect: true
            });
            
            // Add three incorrect options
            for (let i = 0; i < 3; i++) {
                let randomWord;
                do {
                    const randomIndex = Math.floor(Math.random() * limitedWordData.length);
                    randomWord = limitedWordData[randomIndex];
                } while (randomWord.number === germanWord.number || options.some(opt => opt.english === randomWord.english));
                
                options.push({
                    english: randomWord.english,
                    danish: randomWord.danish,
                    isCorrect: false
                });
            }
            
            // Shuffle options
            for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
            }
            
            quizState.currentQuestion = {
                germanWord: germanWord.german,
                correctEnglish: germanWord.english,
                correctDanish: germanWord.danish,
                options: options
            };
        }

        function selectQuizOption(index) {
            if (quizState.isAnswered) return;
            
            // Remove selected class from previous selection
            if (quizState.selectedOptionIndex !== null) {
                const prevOption = document.querySelector(`.quiz-option[data-index="${quizState.selectedOptionIndex}"]`);
                if (prevOption) prevOption.classList.remove('selected');
            }
            
            // Add selected class to current selection
            const selectedOption = document.querySelector(`.quiz-option[data-index="${index}"]`);
            selectedOption.classList.add('selected');
            
            // Store selection
            quizState.selectedOptionIndex = index;
            
            // Update button text
            nextQuizQuestionBtn.textContent = 'Check Answer ‚Üí';
        }

        function playQuizWord() {
            if (!quizState.currentQuestion || quizState.currentQuestionIndex >= quizState.totalQuestions) return;
            
            speakWord(quizState.currentQuestion.germanWord, null, 0.7);
            
            playQuizWordBtn.style.display = 'none';
            playQuizAgainBtn.style.display = 'block';
        }

        function handleNextQuizQuestion() {
            if (!quizState.isAnswered && quizState.selectedOptionIndex !== null) {
                checkQuizAnswer();
            } else if (quizState.isAnswered) {
                nextQuizQuestion();
            }
        }

        function checkQuizAnswer() {
            if (quizState.isAnswered || quizState.selectedOptionIndex === null) return;
            
            const selectedOption = quizState.currentQuestion.options[quizState.selectedOptionIndex];
            const isCorrect = selectedOption.isCorrect;
            
            // Play sound if correct
            if (isCorrect) {
                playDingSound();
            }
            
            // Update score
            if (isCorrect) {
                quizState.score++;
            }
            
            // Highlight correct and incorrect answers
            const optionElements = document.querySelectorAll('.quiz-option');
            optionElements.forEach((option, index) => {
                const optionData = quizState.currentQuestion.options[index];
                
                if (optionData.isCorrect) {
                    option.classList.add('correct');
                } else if (index === quizState.selectedOptionIndex) {
                    option.classList.add('incorrect');
                }
                
                option.style.pointerEvents = 'none';
            });
            
            // Show feedback
            quizFeedback.textContent = isCorrect ? 'Correct!' : 'Incorrect!';
            quizFeedback.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            quizFeedback.style.display = 'block';
            
            // Update stats
            quizScore.textContent = `Score: ${quizState.score}/${quizState.currentQuestionIndex + 1}`;
            
            quizState.isAnswered = true;
            nextQuizQuestionBtn.textContent = 'Next Question ‚Üí';
        }

        function nextQuizQuestion() {
            quizState.currentQuestionIndex++;
            quizState.shouldAutoPlay = true;
            
            if (quizState.currentQuestionIndex < quizState.totalQuestions) {
                updateQuizDisplay();
                
                setTimeout(() => {
                    if (quizState.shouldAutoPlay) {
                        playQuizWord();
                    }
                }, 500);
            } else {
                updateQuizDisplay();
            }
        }

        // AUDIO CHALLENGE FUNCTIONS
        function initializeAudioChallenge() {
            audioState = {
                currentWord: null,
                currentQuestionIndex: 0,
                score: 0,
                totalQuestions: 10,
                words: [],
                isAnswered: false,
                shouldAutoPlay: false
            };
            
            const limitedWordData = getLimitedWordData();
            
            if (limitedWordData.length < 10) {
                audioState.totalQuestions = Math.min(limitedWordData.length, 10);
            }
            
            audioState.words = [...limitedWordData].sort(() => Math.random() - 0.5).slice(0, audioState.totalQuestions);
            
            startAudioQuestion();
            
            updateAudioStats();
            audioFeedback.style.display = 'none';
            audioTranslation.style.display = 'none';
            nextAudioQuestionBtn.style.display = 'none';
            playAudioAgainBtn.style.display = 'none';
            audioInput.value = '';
            audioInput.disabled = false;
            submitAudioAnswerBtn.disabled = false;
        }

        function startAudioQuestion() {
            if (audioState.currentQuestionIndex >= audioState.totalQuestions) {
                audioQuestion.textContent = 'Challenge Completed!';
                playAudioWordBtn.style.display = 'none';
                playAudioAgainBtn.style.display = 'none';
                audioInput.style.display = 'none';
                submitAudioAnswerBtn.style.display = 'none';
                audioFeedback.textContent = `Final Score: ${audioState.score}/${audioState.totalQuestions}`;
                audioFeedback.className = 'quiz-feedback';
                audioFeedback.style.display = 'block';
                return;
            }
            
            audioState.currentWord = audioState.words[audioState.currentQuestionIndex];
            audioState.isAnswered = false;
            
            audioQuestion.textContent = 'Listen to the German word and type what you hear';
            playAudioWordBtn.style.display = 'block';
            playAudioAgainBtn.style.display = 'none';
            audioInput.value = '';
            audioInput.disabled = false;
            submitAudioAnswerBtn.disabled = false;
            audioFeedback.style.display = 'none';
            audioTranslation.style.display = 'none';
            nextAudioQuestionBtn.style.display = 'none';
        }

        function playAudioWord() {
            if (!audioState.currentWord) return;
            
            speakWord(audioState.currentWord.german, null, 0.7);
            
            playAudioWordBtn.style.display = 'none';
            playAudioAgainBtn.style.display = 'block';
            
            audioInput.focus();
        }

        function checkAudioAnswer() {
            if (audioState.isAnswered) return;
            
            const userAnswer = audioInput.value.trim().toLowerCase();
            const correctAnswer = audioState.currentWord.german.toLowerCase();
            
            const isCorrect = userAnswer === correctAnswer;
            
            if (isCorrect) {
                audioState.score++;
            }
            
            audioFeedback.textContent = isCorrect ? 
                `Correct! You typed: "${audioInput.value}"` : 
                `Incorrect. The word was: "${audioState.currentWord.german}". You typed: "${audioInput.value}"`;
            
            audioFeedback.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            audioFeedback.style.display = 'block';
            
            let translationHTML = '<strong>Translations:</strong><br>';
            translationHTML += `English: ${audioState.currentWord.english}<br>`;
            translationHTML += `Danish: ${audioState.currentWord.danish}`;
            
            audioTranslation.innerHTML = translationHTML;
            audioTranslation.style.display = 'block';
            
            audioInput.disabled = true;
            submitAudioAnswerBtn.disabled = true;
            
            updateAudioStats();
            
            audioState.isAnswered = true;
            nextAudioQuestionBtn.style.display = 'block';
        }

        function nextAudioQuestion() {
            audioState.currentQuestionIndex++;
            audioState.shouldAutoPlay = true;
            
            startAudioQuestion();
            updateAudioStats();
            
            setTimeout(() => {
                if (audioState.shouldAutoPlay) {
                    playAudioWord();
                }
            }, 500);
        }

        function updateAudioStats() {
            audioScore.textContent = `Score: ${audioState.score}/${audioState.currentQuestionIndex}`;
            audioQuestionCount.textContent = `Word: ${audioState.currentQuestionIndex + 1}/${audioState.totalQuestions}`;
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
